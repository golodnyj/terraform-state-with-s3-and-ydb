# Terraform State

## Настройка

Отредактируйте файл `main.tf` и заполните необходимые поля: 

1. Замените переменную `DYNAMODB_ENDPOINT` на полученное значение при выполнения предыдущего шага **Создание базы данных Yandex Database**.
2. Замените переменную `DYNAMODB_TABLE` на название таблицы, в нашем случае было использовано `tf_lock`.
3. Замените переменную `BUCKET-ID` в нашем случае был создан бакет `bucket-for-terraform-state`.
4. Замените переменную `KEY` — это идентификатор объекта в бакете, пусть будет равен `terraform-state`.

Сохраните изменения. , затем сделайте вызов:

    terraform init -backend-config="access_key=<ACCESS_KEY>" -backend-config="secret_key=<SECRET_KEY>"

В команде используйте идентификатор ключа доступа `ACCESS_KEY` и секретный ключ `SECRET_KEY` для созданного ранее сервисного аккаунта.

## Использование

Просто используйте Terraform как обычно, и он сохранит файл состояния в Object Store. Во время использования получит/освободит
lock в таблице Yandex Database для предотвращения одновременных операций.